// 0: Content Creator, 1: Affiliate, 2: Coach, 3: Product Creator
const archetypes = [
  {
    key: "content",
    title: "مدل محتواساز (Content Creator)",
    tag: "عاشق ایده و محتوا",
    description:
      "شما به شکل طبیعی به سمت ساختن محتوا، توضیح دادن، داستان‌گویی و دیده شدن جذب می‌شوید. برای شما، ساختن ویدئو، پست، ریلز یا مقاله کار سختی نیست؛ حتی اگر هنوز حرفه‌ای نباشید، انرژی و انگیزهٔ آن را در خودتان دارید.",
    suggestions: [
      "شروع با اینستاگرام، ریلز، یوتیوب شورت یا تیک‌تاک",
      "استفاده از افیلیت مارکتینگ روی محصولاتی که خودتان دوست دارید",
      "ساخت محتوای آموزشی کوتاه (۵۹ ثانیه‌ای) برای جذب لید",
      "ورود به یک سیستم آماده (Ready-To-Earn) برای تبدیل محتوا به درآمد"
    ]
  },
  {
    key: "affiliate",
    title: "مدل افیلیت مارکتر (Affiliate Marketer)",
    tag: "متمرکز بر درآمد و پیشنهاد",
    description:
      "شما بیشتر از ساختن محصول، از پیدا کردن پیشنهاد خوب و معرفی آن به دیگران لذت می‌برید. دوست دارید درآمدتان به نتیجهٔ معرفی و فروش گره بخورد و از مدل‌های کمیسیون‌محور استقبال می‌کنید.",
    suggestions: [
      "انتخاب چند محصول/برنامه افیلیت با کمیسیون بالا و کیفیت خوب",
      "تمرکز روی یک کانال اصلی جذب (اینستاگرام، تلگرام، یوتیوب یا ایمیل)",
      "استفاده از سیستم‌های DFY برای ساخت لندینگ و ایمیل‌های آماده",
      "یادگیری مهارت‌های کوتاه Copywriting برای افزایش کلیک و فروش"
    ]
  },
  {
    key: "coach",
    title: "مدل مربی/مشاور (Coach / Mentor)",
    tag: "حامی و راهنما",
    description:
      "شما به شکل طبیعی تمایل دارید به دیگران کمک کنید، مسیر را برایشان ساده کنید و کنارشان بایستید تا نتیجه بگیرند. توضیح دادن، راهنمایی، شنیدن دغدغه‌ها و ارائهٔ راه‌حل برای شما لذت‌بخش است.",
    suggestions: [
      "تعریف یک مسئله مشخص که می‌توانید در آن کمک کنید (مثلاً شغل، مهاجرت، سلامت، مهارت خاص)",
      "طراحی یک جلسه مشاوره یا پکیج کوچینگ ساده به‌عنوان اولین پیشنهاد",
      "ساخت لندینگ «رزرو جلسه» + سیستم ایمیل و فرم درخواست",
      "استفاده از مدل DFY برای اتوماسیون نوبت‌دهی، پرداخت و فالوآپ"
    ]
  },
  {
    key: "product",
    title: "مدل سازنده محصول دیجیتال (Digital Product Creator)",
    tag: "سازندهٔ سیستم و محصول",
    description:
      "شما از ساختن چیزهای عمیق‌تر مثل دوره، فایل، پی‌دی‌اف، چک‌لیست یا سیستم سازمان‌یافته لذت می‌برید. صبور هستید، به جزئیات توجه می‌کنید و دوست دارید کاری بسازید که یک‌بار تولید شود و بارها فروخته شود.",
    suggestions: [
      "شروع با یک محصول کوچک (Mini Product) مثل چک‌لیست، راهنمای PDF یا ویدئوی کوتاه",
      "ساخت یک قیف ساده: لندینگ → پرداخت → ارسال خودکار محصول",
      "تمرکز روی یک مسئله مشخص که محصول شما آن را حل می‌کند",
      "استفاده از سیستم آماده برای میزبانی صفحات، ایمیل‌ها و اتوماسیون فروش"
    ]
  }
];

// سوالات - ترتیب گزینه‌ها همیشه: A=Content, B=Affiliate, C=Coach, D=Product
const questions = [
  // 1-7: Content倾向
  {
    text: "وقتی یک موضوع جدید یاد می‌گیرید، ناخودآگاه دلتان می‌خواهد چه کار کنید؟",
    options: [
      "در موردش محتوا بسازم یا درباره‌اش حرف بزنم",
      "ببینم چطور می‌توانم آن را تبدیل به فروش کنم",
      "آن را برای دیگران قدم‌به‌قدم توضیح بدهم",
      "ایده محصول یا سیستم بلندمدت از آن دربیاورم"
    ]
  },
  {
    text: "با دوربین و ضبط ویدئو چقدر راحت هستید؟",
    options: [
      "خیلی راحت هستم، حتی اگر حرفه‌ای نباشم",
      "اگر لازم باشد انجام می‌دهم، تمرکزم روی فروش است",
      "بیشتر دوست دارم ویدئو آموزشی و وبینار بسازم",
      "به‌جای ویدئو، محصول و فایل درست‌وحسابی بسازم"
    ]
  },
  {
    text: "تولید محتوا برایتان بیشتر شبیه چیست؟",
    options: [
      "یک کار هیجان‌انگیز و خلاقانه",
      "ابزاری برای جذب مشتری و فروش",
      "روش آموزش دادن و کمک کردن",
      "یک مرحله از فرآیند ساخت محصول"
    ]
  },
  {
    text: "اگر ۲ ساعت وقت خالی داشته باشید، به احتمال زیاد چه کاری می‌کنید؟",
    options: [
      "یک ویدئو، پست یا ریلز می‌سازم",
      "دنبال یک محصول/برنامه افیلیت خوب می‌گردم",
      "برای کسی یک مسئله را توضیح می‌دهم یا مشاوره می‌دهم",
      "روی طراحی یک محصول دیجیتال کار می‌کنم"
    ]
  },
  {
    text: "مخاطب‌سازی در شبکه‌های اجتماعی را چطور می‌بینید؟",
    options: [
      "دوستش دارم، حتی اگر زمان ببرد",
      "لازم است تا بفروشم، پس انجامش می‌دهم",
      "اگر باعث شود آدم‌های درست به من برسند، خوب است",
      "ترجیح می‌دهم تمرکز اصلی روی محصول و سیستم باشد"
    ]
  },
  {
    text: "ثبات در تولید محتوا برایتان چقدر سخت است؟",
    options: [
      "خیلی سخت نیست، اگر موضوع را دوست داشته باشم",
      "سخت است مگر این‌که بازده مالی سریع داشته باشد",
      "بستگی دارد به این‌که برای چه کسی تولید می‌کنم",
      "ترجیح می‌دهم به‌جای تولید مستمر، محصول کامل بسازم"
    ]
  },
  {
    text: "تجربه‌تان در تولید محتوا چیست؟",
    options: [
      "قبلاً زیاد محتوا تولید کرده‌ام (ویدئو، پست، استوری...)",
      "کمی تجربه دارم، بیشتر برای معرفی محصولات",
      "بیشتر تجربه من در کلاس، وبینار یا آموزش بوده",
      "بیشتر روی نوشتن فایل و محصول کار کرده‌ام"
    ]
  },

  // 8-14: Affiliate
  {
    text: "وقتی محصولی را واقعاً دوست دارید، اولین واکنش شما چیست؟",
    options: [
      "برای دیگران در موردش محتوا می‌سازم",
      "سریع می‌گردم ببینم افیلیت یا پلن همکاری دارد یا نه",
      "به چند نفر نزدیکم توصیه‌اش می‌کنم و توضیح می‌دهم چرا خوب است",
      "یادداشت برمی‌دارم تا ایده‌ای برای محصول خودم شود"
    ]
  },
  {
    text: "چقدر از مدل درآمدی «کمیسیون به‌ازای فروش» (افیلیت) خوشتان می‌آید؟",
    options: [
      "خوب است، به‌خصوص اگر با محتوا ترکیب شود",
      "خیلی زیاد، این مدل مورد علاقهٔ من است",
      "اگر در قالب برنامهٔ آموزشی باشد، جالب است",
      "ترجیح می‌دهم درآمدم از محصولات خودم باشد"
    ]
  },
  {
    text: "معرفی یک محصول خوب به دیگران برایتان…",
    options: [
      "طبیعی است، اگر قبلاً تجربه‌اش کرده باشم",
      "یک فرصت عالی برای درآمد است",
      "راهی است برای کمک کردن به دیگران",
      "چندان جذاب نیست، بیشتر دوست دارم خودم بسازم"
    ]
  },
  {
    text: "در پیدا کردن نیاز و مشکل مردم چقدر خودتان را قوی می‌بینید؟",
    options: [
      "خوب، با گوش دادن و تولید محتوا متوجه می‌شوم",
      "خیلی خوب، مخصوصاً وقتی پای فروش در میان باشد",
      "خوب، معمولا موقع مشاوره متوجه می‌شوم",
      "معمولاً از طریق تحقیق و تحلیل متوجه می‌شوم"
    ]
  },
  {
    text: "اگر یک افیلیت با کمیسیون بالا پیدا کنید، احتمالاً…",
    options: [
      "درباره‌اش محتوا می‌سازم تا توجه بگیرد",
      "سریع یک قیف ساده برایش می‌چینم و شروع می‌کنم",
      "آن را در قالب آموزش و توصیه ارائه می‌دهم",
      "از آن برای الهام گرفتن در طراحی محصول خودم استفاده می‌کنم"
    ]
  },
  {
    text: "چقدر از پیگیری نتایج (کلیک، لید، فروش) لذت می‌برید؟",
    options: [
      "تا حدی، بیشتر عاشق تولید محتوا هستم",
      "خیلی زیاد، اعداد و نتایج برایم جذاب است",
      "تا جایی که کمک کند بهتر راهنمایی کنم",
      "فقط در حدی که بدانم محصولم چه عملکردی داشته"
    ]
  },
  {
    text: "اگر کسی بخواهد «سریع‌ترین راه درآمد آنلاین» را بداند، شما…",
    options: [
      "اول از ساخت محتوا برای جذب مخاطب می‌گویم",
      "افیلیت مارکتینگ با یک سیستم آماده را پیشنهاد می‌کنم",
      "می‌گویم باید اول مهارت و مسیرش را مشخص کند",
      "ترجیح می‌دهم بگویم روی محصول و پکیج تمرکز کند"
    ]
  },

  // 15-21: Coach
  {
    text: "وقتی کسی از شما کمک می‌خواهد تا مشکلی را حل کند، احساس شما چیست؟",
    options: [
      "دوست دارم با مثال و محتوا کمکش کنم",
      "اگر بخشی از برنامهٔ کاری‌ام باشد، خوشحال می‌شوم",
      "خیلی خوشحال می‌شوم؛ از این کار انرژی می‌گیرم",
      "ترجیح می‌دهم راه‌حل ساختاری و محصولی برایش طراحی کنم"
    ]
  },
  {
    text: "در توضیح دادن یک موضوع پیچیده به زبان ساده چقدر خوب هستید؟",
    options: [
      "در حد قابل قبول",
      "فقط اگر لازم باشد برای فروش",
      "خیلی خوب، این نقطهٔ قوتم است",
      "بیشتر در قالب فایل و سیستم می‌توانم خوب انجام دهم"
    ]
  },
  {
    text: "از کار کردن مستقیم با آدم‌ها (جلسه، تماس، لایو) چقدر انرژی می‌گیرید؟",
    options: [
      "تا حدی، ولی خسته هم می‌شوم",
      "اگر جلسه هدفمند و فروش‌محور باشد، خوب است",
      "خیلی زیاد، این کار را دوست دارم",
      "ترجیح می‌دهم بیشتر پشت صحنه باشم"
    ]
  },
  {
    text: "آیا حوصلهٔ همراهی یک نفر تا رسیدن به نتیجه را دارید؟",
    options: [
      "اگر خودش متعهد باشد، بله",
      "اگر برنامهٔ مشخص و پرداخت مناسب باشد، بله",
      "بله، این دقیقاً چیزی است که دوست دارم",
      "ترجیح می‌دهم محصولی بسازم که خودش راهنما باشد"
    ]
  },
  {
    text: "اگر قرار باشد برای یک نفر «مسیر شغلی/کسب‌وکار» طراحی کنید…",
    options: [
      "با محتوا و مثال برایش توضیح می‌دهم",
      "با حساب و کتاب و فرصت‌های درآمدی شروع می‌کنم",
      "یک برنامهٔ مرحله‌به‌مرحله می‌نویسم",
      "سیستمی می‌چینم که بتوان آن را برای چند نفر استفاده کرد"
    ]
  },
  {
    text: "به‌نظر خودتان دیگران شما را بیشتر به‌خاطر چه چیزی می‌شناسند؟",
    options: [
      "محتوا، انرژی یا خلاقیت",
      "توانایی پیدا کردن فرصت و راه‌حل مالی",
      "گوش دادن، راهنمایی و توضیح دادن",
      "نظم، سیستم‌سازی یا ساخت چیزهای کاربردی"
    ]
  },
  {
    text: "آیا تا به‌حال به‌طور رسمی یا غیررسمی کسی را کوچ/منتور کرده‌اید؟",
    options: [
      "کمی، بیشتر در قالب محتوا و راهنمایی عمومی",
      "در زمینهٔ فروش/کسب‌وکار کمک کرده‌ام",
      "بله، چند نفر را جدی کوچ یا راهنمایی کرده‌ام",
      "نه خیلی، بیشتر روی ساخت چیزها تمرکز داشته‌ام"
    ]
  },

  // 22-28: Product Creator
  {
    text: "از ساختن چیزهایی مثل PDF، دوره، چک‌لیست یا پکیج چقدر لذت می‌برید؟",
    options: [
      "اگر بتوانم از آن محتوا هم بسازم، خوب است",
      "اگر خوب بفروشد، بله",
      "اگر برای شاگردهایم مفید باشد، عالی است",
      "بسیار زیاد، این دقیقا چیزی است که دوست دارم"
    ]
  },
  {
    text: "کارهای طولانی و مرحله‌به‌مرحله (مثل طراحی یک محصول) برایتان…",
    options: [
      "قابل تحمل است اگر خلاقیت داشته باشد",
      "خوب است اگر نتیجه‌اش درآمد باشد",
      "قابل قبول است اگر به کسی کمک کند",
      "لذت‌بخش است، از پروسهٔ ساختن خوشم می‌آید"
    ]
  },
  {
    text: "رابطهٔ شما با ابزارهای دیجیتال (Canva، Notion، ابزارهای طراحی و سیستم‌سازی) چطور است؟",
    options: [
      "در حد متوسط، بیشتر برای محتوا استفاده می‌کنم",
      "در حدی که برای صفحات فروش و فunnel لازم است",
      "در حد نیاز برای کلاس و آموزش",
      "دوست دارم با این ابزارها چیزهای منظم و حرفه‌ای بسازم"
    ]
  },
  {
    text: "وقتی ایده‌ای به ذهنتان می‌رسد، اولین تمرکز شما روی چیست؟",
    options: [
      "چطور درباره‌اش محتوا بسازم",
      "چطور می‌شود از آن پول درآورد",
      "چطور می‌توانم آن را به دیگران یاد بدهم",
      "چطور می‌توانم از آن یک محصول/سیستم بسازم"
    ]
  },
  {
    text: "چقدر تمایل دارید محصولی بسازید که یک‌بار ساخته شود و چندین بار فروخته شود؟",
    options: [
      "خوب است اگر کنار محتوا باشد",
      "خیلی خوب است، اگر فروشش راحت باشد",
      "اگر برای شاگردهایم مفید باشد، عالی است",
      "خیلی زیاد، این مدل ایده‌آل من است"
    ]
  },
  {
    text: "خودتان را چقدر صبور می‌دانید؟",
    options: [
      "در حد معمول، اگر کار جذاب باشد",
      "اگر نتیجهٔ مالی داشته باشد، صبور می‌شوم",
      "برای شاگرد و مراجع صبور هستم",
      "برای ساخت محصول و سیستم صبورم"
    ]
  },
  {
    text: "از نوشتن، طراحی یا چیدن ساختار یک دوره/فایل چقدر لذت می‌برید؟",
    options: [
      "فقط در حدی که به محتوا کمک کند",
      "اگر برای صفحهٔ فروش و پیشنهاد باشد، خوب است",
      "دوست دارم سرفصل و مسیر آموزشی بچینم",
      "خیلی زیاد، این بخش مورد علاقهٔ من است"
    ]
  },

  // 29-30: عمومی
  {
    text: "سرعت یادگیری خودتان را چطور می‌بینید؟",
    options: [
      "سریع، مخصوصاً در زمینهٔ محتوا و رسانه",
      "سریع، مخصوصاً در زمینهٔ مارکتینگ و فروش",
      "متوسط رو به خوب، مخصوصاً در مهارت‌های عمیق",
      "کندتر ولی عمیق؛ وقتی یاد بگیرم، خوب تسلط پیدا می‌کنم"
    ]
  },
  {
    text: "وقتی با چالشی سخت در مسیر آنلاین روبه‌رو می‌شوید، معمولاً…",
    options: [
      "به یک ایده یا فرمت محتوای جدید فکر می‌کنم",
      "راه درآمدی و مدل جایگزین پیدا می‌کنم",
      "کمک، مشاوره یا آموزش می‌گیرم/می‌دهم",
      "شروع می‌کنم فرآیند و سیستم را اصلاح کنم"
    ]
  }
];

let current = 0;
let answers = [];
let scores = [0, 0, 0, 0];

const questionBox = document.getElementById("question-box");
const prevBtn = document.getElementById("prev-btn");
const nextBtn = document.getElementById("next-btn");
const progressFill = document.getElementById("progress-fill");
const progressText = document.getElementById("progress-text");

// رندر سؤال
function renderQuestion() {
  const q = questions[current];

  progressText.textContent = `سؤال ${current + 1} از ${questions.length}`;
  progressFill.style.width = `${((current + 1) / questions.length) * 100}%`;

  let html = `
    <div class="question">
      <h2>${q.text}</h2>
      <ul class="options-list">
        ${q.options
          .map((opt, i) => {
            const selectedClass = answers[current] === i ? "selected" : "";
            const letters = ["الف", "ب", "ج", "د"];
            return `
              <li class="option ${selectedClass}" onclick="selectOption(${i})">
                <span class="option-label">${opt}</span>
                <span class="option-letter">${letters[i]}</span>
              </li>
            `;
          })
          .join("")}
      </ul>
    </div>
  `;

  questionBox.innerHTML = html;

  prevBtn.disabled = current === 0;
  nextBtn.textContent =
    current === questions.length - 1 ? "مشاهده نتیجه" : "سؤال بعدی";
}

// انتخاب گزینه
window.selectOption = function (index) {
  answers[current] = index;
  renderQuestion();
};

// حرکت به جلو
nextBtn.addEventListener("click", () => {
  if (answers[current] == null) {
    alert("لطفاً یکی از گزینه‌ها را انتخاب کنید.");
    return;
  }

  if (current < questions.length - 1) {
    current++;
    renderQuestion();
  } else {
    calculateResult();
  }
});

// حرکت به عقب
prevBtn.addEventListener("click", () => {
  if (current > 0) {
    current--;
    renderQuestion();
  }
});

// محاسبه نتیجه
function calculateResult() {
  // صفر کردن امتیازها
  scores = [0, 0, 0, 0];

  answers.forEach((answerIndex) => {
    if (answerIndex != null && answerIndex >= 0 && answerIndex <= 3) {
      scores[answerIndex] += 1;
    }
  });

  const maxScore = Math.max(...scores);
  const bestIndex = scores.indexOf(maxScore);
  const best = archetypes[bestIndex];

  showResult(best, scores);
}

// نمایش نتیجه
function showResult(best, scores) {
  const total = answers.length;

  questionBox.innerHTML = `
    <div class="question result-box">
      <span class="result-tag">${best.tag}</span>
      <h2>${best.title}</h2>
      <p>${best.description}</p>

      <p><strong>امتیاز شما در چهار مدل:</strong></p>
      <ul>
        <li>محتواساز: ${scores[0]} از ${total}</li>
        <li>افیلیت مارکتر: ${scores[1]} از ${total}</li>
        <li>مربی/مشاور: ${scores[2]} از ${total}</li>
        <li>سازنده محصول دیجیتال: ${scores[3]} از ${total}</li>
      </ul>

      <p><strong>گام‌های پیشنهادی بعدی برای شما:</strong></p>
      <ul>
        ${best.suggestions.map((s) => `<li>${s}</li>`).join("")}
      </ul>

      <p>
        اگر بخواهید، می‌توانیم برای شما یک
        <strong>سیستم آمادهٔ درآمدزایی (Ready-To-Earn)</strong>
        بر اساس همین نتیجه طراحی کنیم: لندینگ پیج، ایمیل‌های آماده، اتصال به افیلیت‌ها
        و استراتژی محتوا.
      </p>
    </div>
  `;

  nextBtn.style.display = "none";
  prevBtn.textContent = "شروع دوباره";
  prevBtn.disabled = false;

  prevBtn.onclick = () => {
    // ریست
    current = 0;
    answers = [];
    scores = [0, 0, 0, 0];
    prevBtn.onclick = null;
    nextBtn.style.display = "inline-flex";
    nextBtn.textContent = "سؤال بعدی";
    renderQuestion();
  };
}

// شروع
renderQuestion();

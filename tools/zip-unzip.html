<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ZIP & Unzip Tool | Bita Digital Hub</title>
  <meta name="description" content="Compress or extract ZIP files instantly ‚Äî simple, secure, and free tool by Bita Digital Hub." />
  <link rel="stylesheet" href="../css/style.css" />
  <link rel="icon" type="image/png" href="../assets/taskhub-logo.png" />

  <!-- üí∞ Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3215014361489762"
    crossorigin="anonymous"></script>

  <!-- üì¶ JSZip for compression/extraction -->
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
</head>

<body>
  <!-- üß≠ Navbar -->
  <header class="navbar">
    <div class="nav-left">
      <img src="../assets/taskhub-logo.svg" alt="Logo" width="36" height="36" />
      <a href="../index.html" class="brand">Bita Digital Hub</a>
    </div>
    <nav>
      <a href="../index.html">Home</a>
      <a href="../about.html">About</a>
      <a href="../privacy.html">Privacy</a>
    </nav>
  </header>

  <div class="page-wrapper">
    <!-- üì¢ Left Ad -->
    <aside class="ad-left">
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-3215014361489762"
           data-ad-slot="1111111111"
           data-ad-format="auto"></ins>
      <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </aside>

    <!-- üß∞ Main Section -->
    <main class="container">
      <section class="tool-header">
        <h1 id="title">ZIP & Unzip Files üì¶</h1>
        <p id="desc">Compress or extract ZIP files instantly ‚Äî safe and fast, right in your browser.</p>

        <!-- üåê Language Switch -->
        <div class="lang-btns">
          <button id="btnEnglish" class="active">English</button>
          <button id="btnFarsi">ŸÅÿßÿ±ÿ≥€å</button>
        </div>
      </section>

      <!-- üóÇÔ∏è Tool Box -->
      <div class="tool-box" style="max-width:580px;">
        <label id="lblMode">Select mode:</label>
        <select id="modeSelect">
          <option value="zip">Compress files (ZIP)</option>
          <option value="unzip">Extract ZIP file</option>
        </select>

        <label id="lblUpload" for="fileInput">Choose file(s):</label>
        <input type="file" id="fileInput" multiple />

        <button id="processBtn" style="margin-top:1rem;">Start</button>

        <div id="output" class="output-box" style="display:none; text-align:center;">
          <p id="resultMsg"></p>
          <a id="downloadLink" href="#" download="bita-archive.zip" style="color:#2563eb; display:block; margin-top:0.5rem;">‚¨áÔ∏è Download</a>
        </div>
      </div>

      <!-- üì¢ Mid Ad -->
      <div class="ad-mid">
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-3215014361489762"
             data-ad-slot="3333333333"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
      </div>
    </main>

    <!-- üì¢ Right Ad -->
    <aside class="ad-right">
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-3215014361489762"
           data-ad-slot="2222222222"
           data-ad-format="auto"></ins>
      <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </aside>
  </div>

  <!-- üß≠ Footer -->
  <footer>
    <p>¬© 2025 <strong>Bita Digital Hub</strong> ‚Äî Smart, Simple, Free Tools.</p>
  </footer>

  <!-- üì¢ Sticky Ad -->
  <div class="ad-sticky">
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-3215014361489762"
         data-ad-slot="5555555555"
         data-ad-format="horizontal"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  </div>

  <!-- ‚öôÔ∏è Script -->
  <script>
    const texts = {
      en: {
        title: "ZIP & Unzip Files üì¶",
        desc: "Compress or extract ZIP files instantly ‚Äî safe and fast, right in your browser.",
        mode: "Select mode:",
        upload: "Choose file(s):",
        start: "Start",
        compressSuccess: "‚úÖ Files compressed successfully!",
        extractSuccess: "‚úÖ Files extracted successfully!",
        download: "‚¨áÔ∏è Download"
      },
      fa: {
        title: "ŸÅÿ¥ÿ±ÿØŸá‚Äåÿ≥ÿßÿ≤€å Ÿà ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ üì¶",
        desc: "ŸÅÿß€åŸÑ‚ÄåŸáÿß ÿ±ÿß ÿ®Ÿá ÿ≥ÿ±ÿπÿ™ ŸÅÿ¥ÿ±ÿØŸá €åÿß ÿßÿ≤ ÿ≠ÿßŸÑÿ™ ZIP ÿÆÿßÿ±ÿ¨ ⁄©ŸÜ€åÿØ ‚Äî ⁄©ÿßŸÖŸÑÿßŸã ÿßŸÖŸÜ Ÿà ÿ¢ŸÜŸÑÿß€åŸÜ.",
        mode: "ÿ≠ÿßŸÑÿ™ ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ:",
        upload: "ŸÅÿß€åŸÑ(Ÿáÿß) ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ:",
        start: "ÿ¥ÿ±Ÿàÿπ",
        compressSuccess: "‚úÖ ŸÅÿß€åŸÑ‚ÄåŸáÿß ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ŸÅÿ¥ÿ±ÿØŸá ÿ¥ÿØŸÜÿØ!",
        extractSuccess: "‚úÖ ŸÅÿß€åŸÑ‚ÄåŸáÿß ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿ¥ÿØŸÜÿØ!",
        download: "‚¨áÔ∏è ÿØÿßŸÜŸÑŸàÿØ"
      }
    };

    function setLang(lang) {
      const t = texts[lang];
      document.body.dir = lang === "fa" ? "rtl" : "ltr";
      document.getElementById("title").innerText = t.title;
      document.getElementById("desc").innerText = t.desc;
      document.getElementById("lblMode").innerText = t.mode;
      document.getElementById("lblUpload").innerText = t.upload;
      document.getElementById("processBtn").innerText = t.start;

      document.querySelectorAll(".lang-btns button").forEach(b => b.classList.remove("active"));
      document.getElementById(lang === "fa" ? "btnFarsi" : "btnEnglish").classList.add("active");
    }

    document.getElementById("btnEnglish").addEventListener("click", () => setLang("en"));
    document.getElementById("btnFarsi").addEventListener("click", () => setLang("fa"));
    setLang("en");

    const btn = document.getElementById("processBtn");
    const modeSelect = document.getElementById("modeSelect");
    const fileInput = document.getElementById("fileInput");
    const outputBox = document.getElementById("output");
    const resultMsg = document.getElementById("resultMsg");
    const downloadLink = document.getElementById("downloadLink");

    btn.addEventListener("click", async () => {
      const mode = modeSelect.value;
      const files = fileInput.files;
      if (!files.length) {
        alert("Please select at least one file.");
        return;
      }

      const zip = new JSZip();

      if (mode === "zip") {
        for (const f of files) {
          const content = await f.arrayBuffer();
          zip.file(f.name, content);
        }
        const blob = await zip.generateAsync({ type: "blob" });
        const url = URL.createObjectURL(blob);
        downloadLink.href = url;
        resultMsg.innerText = texts.en.compressSuccess;
        outputBox.style.display = "block";
      } else {
        const zipFile = files[0];
        const data = await zip.loadAsync(await zipFile.arrayBuffer());
        const folderZip = new JSZip();
        for (const filename of Object.keys(data.files)) {
          const content = await data.files[filename].async("blob");
          folderZip.file(filename, content);
        }
        const blob = await folderZip.generateAsync({ type: "blob" });
        const url = URL.createObjectURL(blob);
        downloadLink.href = url;
        resultMsg.innerText = texts.en.extractSuccess;
        outputBox.style.display = "block";
      }
    });
  </script>
</body>
</html>
